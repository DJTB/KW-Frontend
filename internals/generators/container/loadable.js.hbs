import Loadable from 'routing/Loadable';

export default Loadable({
  loader: ({ injectReducer{{#if wantLogic}}, injectLogic{{/if}} }) =>
    Promise.all([
      import({{#unless wantLoadable}}/* webpackMode: "eager" */ {{/unless}}'./reducer'),
      {{#if wantLogic}}
      import({{#unless wantLoadable}}/* webpackMode: "eager" */ {{/unless}}'./logic'),
      {{/if}}
      import({{#unless wantLoadable}}/* webpackMode: "eager" */ {{/unless}}'./index'),
    ])
    .then(([reducer, {{#if wantLogic}}logic, {{/if}}component]) => {
      injectReducer('{{ camelCase name }}', reducer.default);
      {{#if wantLogic}}
      injectLogic(logic.default, logic.onLogicInit);
      {{/if}}

      return component;
    }),
});
